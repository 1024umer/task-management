import{d as v}from"./default-61698ed5.js";import{S as p}from"./sweetalert2.all-82b1f328.js";import{_ as k,r as l,e as I,w as e,o as w,a as t,b as c,d as x,t as _}from"./app-b785c0d4.js";const f=new v("admin-proposal"),C=new v("roles"),B={data(){return{roles:[],role_id:0,city:"",breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Task",exact:!0,disabled:!0,to:{name:"auth.tasks.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"",align:"start",sortable:!0,key:"id"},{title:"Duration",align:"start",sortable:!0,key:"duration"},{title:"User's Name",align:"start",sortable:!0,key:"user"},{title:"Task Title",align:"start",sortable:!0,key:"task"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:r,itemsPerPage:i,sortBy:n}){this.loading=!0,this.serverItems=[];var o="";o+="?page="+r;try{n.length>0&&(o+="&sortCol="+n[0].key,o+="&sortByDesc="+n[0].order)}catch{}o+="&perpage="+i,this.search!=""&&(o+="&search="+this.search),this.role_id>0&&(o+="&role_id="+this.role_id),this.city&&(o+="&city="+this.city);const s=await f.getlist(o);this.serverItems=s.data;try{this.totalItems=s.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(r){await p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{if(n.isConfirmed)return!0})&&(await f.delete({id:r}),p.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))},async downlaod(r){}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})},role_id(){this.loadItems({page:1,itemsPerPage:10})},city(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){const r=await C.getlist("").then(i=>i.data);this.roles=[{id:0,title:"All"},...r],this.loadItems({page:1,itemsPerPage:10})},computed:{cities(){return[{keyt:"",text:"All"},...this.$store.getters.getCities]}}},T={class:"add-excel-btn"};function V(r,i,n,o,s,d){const h=l("v-icon"),b=l("v-breadcrumbs"),m=l("v-col"),u=l("v-btn"),y=l("v-text-field"),g=l("v-row"),P=l("v-data-table-server");return w(),I(g,null,{default:e(()=>[t(m,null,{default:e(()=>[t(b,{items:s.breadcrumbs},{prepend:e(()=>[t(h,{size:"small",icon:"mdi-home-city"})]),divider:e(()=>[t(h,null,{default:e(()=>[c("mdi-forward")]),_:1})]),_:1},8,["items"])]),_:1}),t(m,{sm:"6",lg:"3",md:"3"},{default:e(()=>[x("div",T,[t(u,{class:"add-user",link:"",to:{name:"auth.tasks.add"}},{default:e(()=>[c("Add Task")]),_:1},8,["to"])])]),_:1}),t(m,{cols:"12"},{default:e(()=>[t(g,null,{default:e(()=>[t(m,null,{default:e(()=>[t(y,{modelValue:s.search,"onUpdate:modelValue":i[0]||(i[0]=a=>s.search=a),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(P,{"items-per-page":s.itemsPerPage,"onUpdate:itemsPerPage":i[1]||(i[1]=a=>s.itemsPerPage=a),headers:s.headers,"items-length":s.totalItems,items:s.serverItems,loading:s.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":d.loadItems},{"item.user":e(({item:a})=>[c(_(a.user.name),1)]),"item.task":e(({item:a})=>[c(_(a.task.title),1)]),"item.actions":e(({item:a})=>[t(u,{link:"",to:{name:"auth.users.edit",params:{id:a.id}},color:"info",density:"comfortable",size:"small",icon:"mdi-pencil-plus"},null,8,["to"]),t(u,{onClick:A=>d.deleteItem(a.id),color:"error",density:"comfortable",size:"small",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const S=k(B,[["render",V]]);export{S as default};
