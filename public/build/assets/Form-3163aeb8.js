import{d as y}from"./default-05df27b5.js";import{_ as C,r as d,e as U,w as i,o as p,a as o,b as g,d as x,c as k,f as q,t as N,g as B}from"./app-4c5af1ad.js";const h=new y("profiles"),D={data(){return{roles:[],breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0}],form:{name:"",email:"",password:"",cnic:"",dob:"",address:"",image:[],city:"",phone:"",id:0},loading:!1,errors:{name:[],email:[],password:[],image:[],cnic:[],dob:[],address:[],city:[],phone:[]}}},methods:{async insertRecord(){this.resetErrors(),this.loading=!0;var e=new FormData;e.append("name",this.form.name),e.append("email",this.form.email),e.append("dob",this.form.dob),e.append("address",this.form.address),e.append("cnic",this.form.cnic),e.append("city",this.form.city),e.append("phone",this.form.phone),this.form.id>0&&e.append("id",this.form.id);const s=this.form.password!==void 0?this.form.password:"";s!==""&&e.append("password",s),this.form.image&&this.form.image.length>0&&e.append("image",this.form.image[0]);try{var a=await h.update(e,this.form.id);a.status?location.reload():(a.data.name&&(this.errors.name=a.data.name),a.data.email&&(this.errors.email=a.data.email),a.data.image&&(this.errors.image=a.data.image),a.data.password&&(this.errors.password=a.data.password),a.data.cnic&&(this.errors.cnic=a.data.cnic),a.data.address&&(this.errors.address=a.data.address),a.data.dob&&(this.errors.dob=a.data.dob),a.data.city&&(this.errors.city=a.data.city),a.data.phone&&(this.errors.phone=a.data.phone))}catch(u){console.error(u)}this.loading=!1},onFileChange(e){this.form.thumbnail=e.target.files[0]},resetErrors(){this.errors={name:[],email:[],password:[],image:[],cnic:[],address:[],dob:[],city:[],phone:[]}}},watch:{},async mounted(){try{const e=await h.get();this.res=e,this.form={name:e.name?e.name:"",phone:e.phone?e.phone:"",city:e.city?e.city:"",email:e.email?e.email:"",cnic:e.cnic?e.cnic:"",dob:e.dob?e.dob:"",address:e.address?e.address:"",role_id:e.role_id?e.role_id:"",id:e.id?e.id:0},this.form.id>0&&this.breadcrumbs.push({title:"Profile",exact:!0,disabled:!0})}catch(e){console.error(e)}},computed:{cities(){return this.$store.getters.getCities}}},P={key:0};function E(e,s,a,u,r,n){const c=d("v-icon"),b=d("v-breadcrumbs"),t=d("v-col"),m=d("v-text-field"),_=d("v-select"),V=d("v-file-input"),v=d("v-img"),w=d("v-btn"),f=d("v-row");return p(),U(f,{class:"px-5"},{default:i(()=>[o(t,{cols:"12"},{default:i(()=>[o(b,{items:r.breadcrumbs},{prepend:i(()=>[o(c,{size:"small",icon:"mdi-home-city"})]),divider:i(()=>[o(c,null,{default:i(()=>[g("mdi-forward")]),_:1})]),_:1},8,["items"])]),_:1}),o(t,{cols:"12"},{default:i(()=>[x("form",{onSubmit:s[9]||(s[9]=B((...l)=>e.submit&&e.submit(...l),["prevent"]))},[o(f,null,{default:i(()=>[o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.name,"onUpdate:modelValue":s[0]||(s[0]=l=>r.form.name=l),counter:255,label:"Name",required:"","error-messages":r.errors.name},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.email,"onUpdate:modelValue":s[1]||(s[1]=l=>r.form.email=l),counter:255,label:"Email",required:"","error-messages":r.errors.email},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.cnic,"onUpdate:modelValue":s[2]||(s[2]=l=>r.form.cnic=l),counter:255,label:"CNIC",required:"","error-messages":r.errors.cnic},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.address,"onUpdate:modelValue":s[3]||(s[3]=l=>r.form.address=l),counter:255,label:"Address",required:"","error-messages":r.errors.address},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.dob,"onUpdate:modelValue":s[4]||(s[4]=l=>r.form.dob=l),label:"DOB",type:"date",required:"","error-messages":r.errors.dob},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.password,"onUpdate:modelValue":s[5]||(s[5]=l=>r.form.password=l),label:"Password",type:"password","error-messages":r.errors.password},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(m,{modelValue:r.form.phone,"onUpdate:modelValue":s[6]||(s[6]=l=>r.form.phone=l),label:"Phone",required:"","error-messages":r.errors.phone},null,8,["modelValue","error-messages"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(_,{"error-messages":r.errors.city,"item-title":"text","item-value":"keyt",label:"City",items:n.cities,modelValue:r.form.city,"onUpdate:modelValue":s[7]||(s[7]=l=>r.form.city=l)},null,8,["error-messages","items","modelValue"])]),_:1}),o(t,{cols:"12",sm:"12",md:"6",lg:"6"},{default:i(()=>[o(V,{modelValue:r.form.image,"onUpdate:modelValue":s[8]||(s[8]=l=>r.form.image=l),counter:255,label:"Profile Picture",required:"","error-messages":r.errors.image,onChange:n.onFileChange},null,8,["modelValue","error-messages","onChange"]),e.res&&e.res.image?(p(),k("div",P,[o(v,{height:"25%",width:"25%",alt:"Avatar",src:e.res.image_url},null,8,["src"])])):q("",!0)]),_:1}),o(t,{cols:"12"},{default:i(()=>[o(w,{class:"update-record",onClick:n.insertRecord,disabled:r.loading,loading:r.loading,"loading-text":r.form.id>0?"Updating":"Inserting"},{default:i(()=>[g(N(r.form.id>0?"Update":"Insert")+" Record",1)]),_:1},8,["onClick","disabled","loading","loading-text"])]),_:1})]),_:1})],32)]),_:1})]),_:1})}const R=C(D,[["render",E]]);export{R as default};
