import{d as v}from"./default-4bb1e9d1.js";import{S as h}from"./sweetalert2.all-ad1504cb.js";import{_ as P,r as l,e as I,w as s,o as y,a as t,b as w}from"./app-36159b0a.js";const g=new v("roles"),x={data(){return{breadcrumbs:[{title:"Dashboard",to:{name:"auth.panel"},disabled:!1,exact:!0},{title:"Roles",exact:!0,disabled:!0,to:{name:"auth.roles.listing"}}],serverItems:[],totalItems:0,loading:!1,itemsPerPage:10,search:"",headers:[{title:"ID",align:"start",sortable:!0,key:"id"},{title:"Title",align:"start",sortable:!0,key:"title"},{title:"Name",align:"start",sortable:!0,key:"name"},{title:"Actions",sortable:!1,key:"actions"}]}},methods:{async loadItems({page:n,itemsPerPage:a,sortBy:r}){this.loading=!0,this.serverItems=[];var o="";o+="?page="+n;try{r.length>0&&(o+="&sortCol="+r[0].key,o+="&sortByDesc="+r[0].order)}catch{}o+="&perpage="+a,this.search!=""&&(o+="&search="+this.search);const e=await g.getlist(o);this.serverItems=e.data;try{this.totalItems=e.meta.total}catch{this.totalItems=0}this.loading=!1},async deleteItem(n){await h.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{if(r.isConfirmed)return!0})&&(await g.delete({id:n}),h.fire("Deleted!","Your record has been deleted.","success"),this.loadItems({page:1,itemsPerPage:10}))}},watch:{$route(){this.loadItems({page:1,itemsPerPage:10})},itemsPerPage(){this.loadItems({page:1,itemsPerPage:10})},search(){this.loadItems({page:1,itemsPerPage:10})}},async mounted(){this.loadItems({page:1,itemsPerPage:10})}};function C(n,a,r,o,e,d){const c=l("v-icon"),_=l("v-breadcrumbs"),m=l("v-col"),f=l("v-text-field"),u=l("v-row"),p=l("v-btn"),b=l("v-data-table-server");return y(),I(u,null,{default:s(()=>[t(m,{cols:"12"},{default:s(()=>[t(_,{items:e.breadcrumbs},{prepend:s(()=>[t(c,{size:"small",icon:"mdi-home-city"})]),divider:s(()=>[t(c,null,{default:s(()=>[w("mdi-forward")]),_:1})]),_:1},8,["items"])]),_:1}),t(m,{cols:"12"},{default:s(()=>[t(u,null,{default:s(()=>[t(m,null,{default:s(()=>[t(f,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=i=>e.search=i),label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(b,{"items-per-page":e.itemsPerPage,"onUpdate:itemsPerPage":a[1]||(a[1]=i=>e.itemsPerPage=i),headers:e.headers,"items-length":e.totalItems,items:e.serverItems,loading:e.loading,"item-value":"id","loading-text":"Loading","onUpdate:options":d.loadItems},{"item.actions":s(({item:i})=>[t(p,{link:"",to:{name:"auth.roles.edit",params:{id:i.selectable.id}},color:"info",density:"comfortable",size:"small",icon:"mdi-pencil-plus"},null,8,["to"]),t(p,{onClick:k=>d.deleteItem(i.selectable.id),color:"error",density:"comfortable",size:"small",icon:"mdi-delete-outline"},null,8,["onClick"])]),_:1},8,["items-per-page","headers","items-length","items","loading","onUpdate:options"])]),_:1})]),_:1})}const U=P(x,[["render",C]]);export{U as default};
